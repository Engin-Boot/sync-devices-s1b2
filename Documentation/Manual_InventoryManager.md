# Inventory Manager

## About

This script processes patient information csv file generated by the mqtt devices of this repository and based on the procedure entered in these devices, maintains record of items in inventory required for that procedure and alerts when there is shortage of any item in inventory.

As mentioned in the problem statement when a cardiac procedure is performed, a cardiac catheter is required so whenever cardiac procedure is performed the count of cardiac catheter is reduced and if the count of catheter is less than three the module alerts the concerned person by sending a mail.

## Usage

All paths are set as per this repository,  you can reset these paths as per your requirements: the path of directory to be watched for patient info file, patient file path and inventory file path in global variable section of script.

This script uses local SMTP server to recieve mail which can be changed to run on any other SMTP server, to initiate local SMTP server use command mentioned in the next line in command prompt. Run SMTP server.

```
python -m smtpd -c DebuggingServer -n localhost:1025
```

Now execute Inventory Manager python file as

```
python InventoryManager.py
```

Keep the script running while the devices are being used.

## Description

The module identifies modification whenever the patient file is updated using watchdog, which watches directory for change. Whenever the patient file is modified the event gets detected.

On detection of modification the last patient details are read from the CSV file and the procedure performed is identified.

A procedure dictionary is used which lists out procedures and required item for that procedure. The procedure is mapped to the corresponding item.

Count of the required item is reduced in the inventory CSV.

Whenever count of item is below a given threshold(here 3) a mail is sent using SMTP(here to local SMTP server).

This is simple chart to elaborate all basic components:

![alt text] (https://github.com/Engin-Boot/sync-devices-s1b2/blob/master/Documentation/flow.png)